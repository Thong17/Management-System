{% extends 'layout/layout.html' %}

{% block navbar %}
<ul class="menu-bar">
    <li class="menu-category">
        <a href="/category">
            Category
        </a>
    </li>
    <li class="menu-brand">
        <a href="/brand">
            Product
        </a>
    </li>
    <li class="menu-store">
        <a href="/store">
            Store
        </a>
    </li>
    <li class="menu-admin">
        <a href="/admin">
            User
        </a>
    </li>
    <li class="menu-role">
        <a href="/role">
            Role
        </a>
    </li>
    <li class="menu-advertise">
        <a href="/advertise">
            Advertise
        </a>
    </li>
</ul>
{% endblock %}

{% block content %}
<div class="wrap-container grid-container">
    <div class="grid-item">
        <div class="item-header">
            Category
        </div>
        <div class="item-body" id="pie">
            <canvas id="pieChart"></canvas>
        </div>
    </div>
    <div class="grid-item">
        <div class="item-header">
            Product
        </div>
        <div class="item-body" id="doughnut">
            <canvas id="doughnutChart"></canvas>
        </div>
    </div>
</div>
{% endblock %}
{% block script %}
<script>
    $(document).ready(function () {
        $.ajax({
            url: '/custome',
            method: 'POST',
            success: function (data) {
                var category = {
                    labels: [],
                    quantities: [],
                    colors: []
                }

                data.categories.forEach(c => {
                    category.labels.push(c.category)
                    category.quantities.push(c.products.length)
                    category.colors.push(generateColor())

                });

                var brand = {
                    labels: [],
                    quantities: [],
                    colors: []
                }

                data.brands.forEach(b => {
                    brand.labels.push(b.brand)
                    brand.quantities.push(b.products.length)
                    brand.colors.push(generateColor())

                });


                var pie = document.getElementById('pie')
                var pieCanvas = document.getElementById('pieChart')

                var doughnut = document.getElementById('doughnut')
                var doughnutCanvas = document.getElementById('doughnutChart')


                _Chart(pie, pieCanvas, 'doughnut', category)
                _Chart(doughnut, doughnutCanvas, 'pie', brand)
            }
        })
    })


</script>
{% endblock %}